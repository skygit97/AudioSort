{"version":3,"sources":["webpack://AudioSort/./src/index.js"],"names":["window","addEventListener","canvas","document","getElementById","canvasCtx","getContext","width","Math","floor","clientWidth","console","log","height","clientHeight","WIDTH","HEIGHT","gradient","createLinearGradient","addColorStop","beginPath","setLineDash","moveTo","lineTo","lineWidth","strokeStyle","stroke","audioCtx","AudioContext","webkitAudioContext","analyser","createAnalyser","audio","source","createMediaElementSource","connect","destination","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","animateID","draw","requestAnimationFrame","getByteFrequencyData","clearRect","x","barWidth","i","barHeight","y1","y2","fillStyle","fillRect","bubbleSort","arr","sort","virtualArr","slice","length","done","j","temp","push","darw","animation","interval","forEach","item","setTimeout","cancelAnimationFrame"],"mappings":"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","file":"main.js","sourcesContent":["window.addEventListener(\"load\", () => {\r\n\tconst canvas = document.getElementById(\"canvas\");\r\n\tconst canvasCtx = canvas.getContext(\"2d\");\r\n\r\n\t// increase canvas resolution\r\n\tcanvas.width = Math.floor(canvas.clientWidth);\r\n  console.log(canvas.width);\r\n\tcanvas.height = canvas.clientHeight;\r\n\tconst WIDTH = canvas.width;\r\n  console.log(WIDTH);\r\n\tconst HEIGHT = canvas.height;\r\n\r\n\t// create canvas gradient\r\n\tconst gradient = canvasCtx.createLinearGradient(0, 0, WIDTH, 0);\r\n\tgradient.addColorStop(0, \"red\");\r\n\tgradient.addColorStop(0.16, \"orange\");\r\n\tgradient.addColorStop(0.32, \"yellow\");\r\n\tgradient.addColorStop(0.48, \"green\");\r\n\tgradient.addColorStop(0.64, \"blue\");\r\n\tgradient.addColorStop(0.8, \"purple\");\r\n\tgradient.addColorStop(1, \"red\");\r\n\r\n\t// create canvas mid line\r\n\tcanvasCtx.beginPath();\r\n\tcanvasCtx.setLineDash([7]);\r\n\tcanvasCtx.moveTo(0, HEIGHT / 2);\r\n\tcanvasCtx.lineTo(WIDTH, HEIGHT / 2);\r\n\tcanvasCtx.lineWidth = 2;\r\n\tcanvasCtx.strokeStyle = gradient;\r\n\tcanvasCtx.stroke();\r\n\r\n\t// create audio analyser node\r\n\tconst audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n\tconst analyser = audioCtx.createAnalyser();\r\n\r\n\t// connect node to audio source\r\n\tconst audio = document.getElementById(\"audio\");\r\n\tconst source = audioCtx.createMediaElementSource(audio);\r\n\tsource.connect(analyser);\r\n\tsource.connect(audioCtx.destination);\r\n\r\n\t// caputure audio data\r\n\tanalyser.fftSize = 128;\r\n\tconst bufferLength = analyser.frequencyBinCount;\r\n  console.log(bufferLength)\r\n\tconst dataArray = new Uint8Array(bufferLength);\r\n\r\n\tlet animateID;\r\n\r\n\tconst draw = () => {\r\n    animateID = requestAnimationFrame(draw);\r\n\t\tanalyser.getByteFrequencyData(dataArray);\r\n    \r\n\t\tcanvasCtx.clearRect(0, 0, WIDTH, HEIGHT / 2 - 4);\r\n\t\tcanvasCtx.clearRect(0, 4 + HEIGHT / 2, WIDTH, HEIGHT / 2);\r\n    \r\n    // let numBars = 100;\r\n    let x = 0;\r\n\t\tlet barWidth = WIDTH / bufferLength;\r\n\t\tfor (let i = 0; i < bufferLength; i++) {\r\n\t\t\tlet barHeight = dataArray[i] / 2;\r\n\t\t\tlet y1 = HEIGHT / 2 - barHeight - 5;\r\n\t\t\tlet y2 = (HEIGHT - 2) / 2 + 5;\r\n\r\n\t\t\tcanvasCtx.fillStyle = gradient;\r\n\r\n\t\t\tcanvasCtx.fillRect(x, y1, barWidth, barHeight);\r\n\t\t\tcanvasCtx.fillRect(x, y2, barWidth, barHeight);\r\n\t\t\tx += barWidth + 1;\r\n\t\t}\r\n\t};\r\n\tdraw();\r\n\r\n\tfunction bubbleSort(arr) {\r\n\t\tfunction sort() {\r\n\t\t\tlet virtualArr = [arr.slice()];\r\n\t\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\t\tvar done = true;\r\n\t\t\t\tfor (var j = 0; j < arr.length - i; j++) {\r\n\t\t\t\t\tif (arr[j] > arr[j + 1]) {\r\n\t\t\t\t\t\tvar temp = arr[j];\r\n\t\t\t\t\t\tarr[j] = arr[j + 1];\r\n\t\t\t\t\t\tarr[j + 1] = temp;\r\n\t\t\t\t\t\tdone = false;\r\n\t\t\t\t\t\tvirtualArr.push(arr.slice());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (done) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn virtualArr;\r\n\t\t}\r\n\r\n\t\tfunction darw(dataArray) {\r\n\t\t\tcanvasCtx.clearRect(0, 0, WIDTH, HEIGHT / 2 - 4);\r\n\t\t\tcanvasCtx.clearRect(0, 4 + HEIGHT / 2, WIDTH, HEIGHT / 2);\r\n\r\n\t\t\tlet barWidth = WIDTH / bufferLength;\r\n\t\t\tlet x = 0;\r\n\t\t\tfor (let i = 0; i < bufferLength; i++) {\r\n\t\t\t\tlet barHeight = dataArray[i] /2 ;\r\n\t\t\t\tlet y1 = HEIGHT / 2 - barHeight - 5;\r\n\t\t\t\tlet y2 = (HEIGHT - 2) / 2 + 5;\r\n\r\n\t\t\t\tcanvasCtx.fillStyle = gradient;\r\n\r\n\t\t\t\tcanvasCtx.fillRect(x, y1, barWidth, barHeight);\r\n\t\t\t\tcanvasCtx.fillRect(x, y2, barWidth, barHeight);\r\n\t\t\t\tx += barWidth + 1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// animation\r\n\t\tfunction animation() {\r\n\t\t\t// Call the sort method to return an array containing the contents of each step\r\n\t\t\tvar virtualArr = sort();\r\n\t\t\tvar interval = 1000;\r\n\t\t\t// Traverse the resulting array, and call the darw method every 500ms to draw a step\r\n\t\t\tvirtualArr.forEach((item) => {\r\n\t\t\t\tsetTimeout(() => darw(item), interval);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tanimation();\r\n\t}\r\n\taudio.addEventListener(\"pause\", () => {\r\n\t\tcancelAnimationFrame(animateID);\r\n\t\tbubbleSort(dataArray);\r\n\t});\r\n});\r\n"],"sourceRoot":""}